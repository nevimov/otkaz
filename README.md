У большинства компаний, занимающихся продажей окон, как правило, имеется
несколько десятков изделий, не принятых заказчиками по тем или иным причинам.
Такие окна называют "отказными" и цена на них обычно существенно ниже.

Данный проект представляет из себя агрегатор отказных окон.
Компании-продавцы, после прохождения регистрации, могут размещать здесь свои
окна. Посетители, ищущие окно "подешевле", могут быстро найти изделие,
соответствующее требуемым характеристикам.


# Текущее состояние проекта

Работа над начальной версией сайта закончена примерно на 2/3. Главной
незавершенной частью является "Личный кабинет продавца". Как временное
решение, для предоставления административного интерфейса продавцам,
используется дополнительный экземпляр django.contrib.admin.sites.AdminSite.
Решение работает, но не выглядит особенно эффектно и слабо приспособлено к
изменениям, которые потребуются в будущем, при монетизации проекта.

Также перед запуском проекта необходимо написать тексты для страниц "О проекте"
и "Условия размещения". Пока что, вместо них используется текст Lorem ipsum.

Основной административный сайт нуждается в доработке, но требования к нему пока
что не определены. Нужный функционал будет добавляться по мере надобности.

Полный список всего, что нужно сделать, содержится в файле `TODO.md`.


# Развертка окружения разработчика

Если вы используете [Docker](https://www.docker.com), то все просто:

1) Постройте и запустите контейнеры:
```console
docker-compose up --detach
```

2) Запустите bash в контейнере службы 'web':
```console
docker exec -it otkaz_web bash
```

3) Подготовьте окружение разработчика к работе:
```console
./manage.py initenv dev
```
Данная команда выполняет следующие действия:
- Запускает миграции БД.
- Создает аккаунт суперпользователя для административного сайта.
- Заполняет БД выдуманными данными, чтобы сайт нормально работал и не
  выглядел пустым.

4) Все готово. Теперь можно запустить проект при помощи:
```console
make run
```
и открыть в веб-браузере адрес [0.0.0.0](http://0.0.0.0).

Данная команда запускает три сервера (для Москвы, Самары и Новокузнецка) в
одной группе процессов. Нажатие Ctrl-C остановит все три процесса.
В случае если у ПК мало ресурсов, можно запустить сервер для одного города
заменив `run` на `run-msk`, `run-sm` или `run-nk`.

Чтобы запустить сервер с панелью
[debug_toolbar](https://github.com/jazzband/django-debug-toolbar), добавьте
`-dt` концу команды. Например, `make run-dt` или `make run-msk-dt`.

Все make-задания для работы с проектом определены в файле `Makefile`. Они
также продублированы в `package.json`, что позволяет запускать задания через
GUI в некоторых IDE (например, VSCode).


# Административный сайт

Для доступа к административному сайту используйте стандартный URL
[/admin](http://0.0.0.0/admin/)
```
Логин:   admin
Пароль:  dummypass
```


# Личный кабинет для продавцов

Для входа в ЛК продавца (Продавцам -> Личный кабинет), используйте следующие
данные:
```
Логин:   testseller
Пароль:  testseller
```


# Тесты

Тесты запускаются стандартно, при помощи:
```console
./manage.py test
```


# Стилевые соглашения

## Python

Код должен соответствовать рекомендациям
[PEP-8](https://www.python.org/dev/peps/pep-0008/). Без фанатизма. Если,
скажем, строка больше 79-и символов, но значительно легче читается без
разбития на две строки, оставьте как есть.

Python-код на проекте проверяется при помощи
[Prospector](https://github.com/PyCQA/prospector). Для запуска полной
проверки используйте команду:
```console
prospector
```

## JavaScript

Основные правила касательно стиля JS кода:
* Используйте 2 пробела для отступа (indent level).
* Не используйте ';' для отделения инструкций без крайней необходимости.
* Старайтесь не писать строки больше 79 символов. Однако, если длинная
  строка существенно улучшает читаемость кода -- игнорируйте данное правило.

JS-код на проекте проверяется при помощи [ESLint](https://eslint.org).
(config-файл `.eslintrc.yml`). Для проверки всего JS-кода, используйте
```console
make js-lint
```

Чтобы проверить отдельный файл:
```console
npx eslint ./core/static/js/src/<нужный-файл>
```

## SASS

Методология, наподобие BEM, SMACSS или Atomic CSS, на данном проекте не
используется.

Все исходники стилей находятся в директории `core/static/css/src/`.

Каждый модуль, в начале файла, должен содержать комментарий о своем
назначении.
